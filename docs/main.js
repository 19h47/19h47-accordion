!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Accordion=t():e.Accordion=t()}(self,(function(){return function(){"use strict";var e={d:function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return l}});const i=e=>e.classList.remove("is-active"),s=(e,t={},i="")=>{const s=new CustomEvent(`Panel.${i}`,{bubbles:!1,cancelable:!0,detail:t});return e.dispatchEvent(s)},n="aria-expanded";class o{constructor(e){this.$body=null,this.$button=null,this.$inner=null,this.isDeselect=!1,this.isOpen=!1,this.height=0,this.el=e}init(){var e,t;this.$button=this.el.querySelector(".js-accordion-header"),this.$body=this.el.querySelector(".js-accordion-body"),this.$inner=this.el.querySelector(".js-accordion-inner"),this.isDeselect=JSON.parse(this.el.getAttribute("data-accordion-deselect")),this.isOpen=JSON.parse(this.el.getAttribute("data-accordion-open"))||!1,this.handleResize=this.handleResize.bind(this),this.handleClick=this.handleClick.bind(this),null===(e=this.$body)||void 0===e||e.style.setProperty("max-height",this.height.toString()),null===(t=this.$body)||void 0===t||t.style.setProperty("overflow","hidden"),this.handleResize(),this.initEvents(),!0===this.isOpen&&this.open()}initEvents(){var e;null===(e=this.$button)||void 0===e||e.addEventListener("click",this.handleClick),window.addEventListener("resize",this.handleResize)}handleClick(){return(!1!==this.isDeselect||!0!==this.isOpen)&&(!0===this.isOpen?(s(this.el,{current:this.el},"close"),this.close()):!1!==this.isOpen||(s(this.el,{current:this.el},"open"),this.open()))}handleResize(){var e,t;this.height=(null===(e=this.$inner)||void 0===e?void 0:e.offsetHeight)||0,this.isOpen&&(null===(t=this.$body)||void 0===t||t.style.setProperty("max-height",`${this.height}px`))}close(){var e,t;this.el.setAttribute("data-accordion-open","false"),null===(e=this.$button)||void 0===e||e.setAttribute(n,"false"),null===(t=this.$body)||void 0===t||t.style.setProperty("max-height","0"),i(this.el),this.isOpen=!1}open(){var e,t;this.el.setAttribute("data-accordion-open","true"),null===(e=this.$button)||void 0===e||e.setAttribute(n,"true"),null===(t=this.$body)||void 0===t||t.style.setProperty("max-height",`${this.height}px`),this.el.classList.add("is-active"),this.isOpen=!0}destroy(){var e,t,s;null===(e=this.$button)||void 0===e||e.removeEventListener("click",this.handleClick),window.removeEventListener("resize",this.handleResize),null===(t=this.$body)||void 0===t||t.style.removeProperty("max-height"),null===(s=this.$body)||void 0===s||s.style.removeProperty("overflow"),i(this.el)}}const h={multiselectable:!1};class l{constructor(e,t={}){this.accordions=[],this.panels=[],this.current=0,this.closeAll=()=>this.panels.forEach((e=>e.close())),this.el=e,this.options={...h,...t},this.handleHashchange=this.handleHashchange.bind(this),this.handleKeydown=this.handleKeydown.bind(this)}init(){return null!==this.el&&void 0!==this.el&&(this.accordions=[...this.el.children].filter((e=>e.classList.contains("js-accordion-panel"))),this.accordions.forEach(((e,t)=>{const i=new o(e);return i.init(),this.panels.push(i),e.addEventListener("Panel.open",(()=>{this.current=t,this.options.multiselectable||this.closeAll()})),!0})),this.initEvents(),this.handleHashchange(),!0)}initEvents(){window.addEventListener("hashchange",this.handleHashchange),this.el.addEventListener("keydown",this.handleKeydown)}handleHashchange(){this.panels.forEach(((e,t)=>!e.$body||`#${e.$body.id}`!==document.location.hash.replace(/^#\//,"")||(this.current=t,this.closeAll(),e.open())))}handleKeydown(e){const{target:t,key:i,code:s}=e,n=()=>{var i;t.classList.contains("js-accordion-header")&&(this.current=this.current+1>this.panels.length-1?0:this.current+1,null===(i=this.panels[this.current].$button)||void 0===i||i.focus(),e.preventDefault())},o=()=>{var i;t.classList.contains("js-accordion-header")&&(this.current=0>this.current-1?this.panels.length-1:this.current-1,null===(i=this.panels[this.current].$button)||void 0===i||i.focus(),e.preventDefault())},h={ArrowUp:o,ArrowRight:n,ArrowDown:n,ArrowLeft:o,Home:()=>{var t;null===(t=this.panels[0].$button)||void 0===t||t.focus(),e.preventDefault()},End:()=>{var t;null===(t=this.panels[this.panels.length-1].$button)||void 0===t||t.focus(),e.preventDefault()},default:()=>!1};return(h[i||s]||h.default)()}destroyAll(){return this.panels.forEach((e=>e.destroy())),this.panels=[],window.removeEventListener("hashchange",this.handleHashchange,!1),this.el.removeEventListener("keydown",this.handleKeydown),!0}}return t}()}));